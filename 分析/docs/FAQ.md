# ❓ 常见问题解答 (FAQ)

## 🚀 快速解答

### Q1: 系统支持哪些操作系统？
**A**: 支持所有主流操作系统：
- ✅ Windows 10/11
- ✅ macOS 10.14+
- ✅ Linux (Ubuntu 18.04+)
- ✅ 云端环境 (Streamlit Cloud, Heroku等)

### Q2: 需要什么Python版本？
**A**: 
- **最低要求**: Python 3.8
- **推荐版本**: Python 3.11
- **测试版本**: 3.8, 3.9, 3.10, 3.11

### Q3: 系统是否免费？
**A**: 
- ✅ **完全免费**：开源MIT许可证
- ✅ **无使用限制**：可商用、修改、分发
- ✅ **无隐藏费用**：所有功能免费使用

---

## 📊 数据相关问题

### Q4: 数据来源是什么？
**A**: 
- **主要数据源**: akshare (https://akshare.akfamily.xyz/)
- **数据类型**: 期货持仓排名、期货行情数据
- **更新频率**: 交易日实时更新
- **数据质量**: 来自官方交易所，准确可靠

### Q5: 支持哪些期货交易所？
**A**: 
- 🏢 **大商所** (大连商品交易所)
- 🏢 **中金所** (中国金融期货交易所)  
- 🏢 **郑商所** (郑州商品交易所)
- 🏢 **上期所** (上海期货交易所)
- 🏢 **广期所** (广州期货交易所) - 智能跳过

### Q6: 为什么有时候数据获取失败？
**A**: 可能的原因和解决方案：
- **网络问题**: 检查网络连接，稍后重试
- **API限制**: akshare可能有访问频率限制，等待几分钟
- **交易所维护**: 交易所数据源可能在维护，选择其他日期
- **云端限制**: 某些云端环境对外部API有限制

### Q7: 广期所数据为什么经常获取失败？
**A**: 
- **原因**: 广期所API在云端环境中响应较慢
- **解决方案**: v2.1版本已实现智能跳过功能
- **影响**: 不影响其他交易所数据获取和分析
- **超时设置**: 15秒自动跳过，避免长时间等待

---

## 🔧 技术问题

### Q8: 如何解决依赖包安装失败？
**A**: 
```bash
# 方法1: 升级pip
pip install --upgrade pip
pip install -r requirements.txt

# 方法2: 使用国内镜像
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/

# 方法3: 逐个安装
pip install streamlit pandas numpy plotly akshare openpyxl
```

### Q9: Streamlit启动失败怎么办？
**A**: 
```bash
# 检查Streamlit版本
streamlit --version

# 重新安装Streamlit
pip uninstall streamlit
pip install streamlit>=1.28.0

# 清理缓存
streamlit cache clear

# 使用指定端口启动
streamlit run streamlit_app.py --server.port 8502
```

### Q10: 内存不足怎么办？
**A**: 
- **最低要求**: 2GB RAM
- **推荐配置**: 4GB+ RAM
- **优化方法**:
  - 关闭其他程序释放内存
  - 使用缓存功能减少重复计算
  - 分批处理大量数据

### Q11: 系统运行很慢怎么办？
**A**: 
- **首次运行**: 1-3分钟属正常，需要下载数据
- **后续运行**: 应该在10-30秒内完成
- **优化建议**:
  - 使用缓存功能
  - 检查网络连接速度
  - 清理旧缓存文件

---

## 📈 分析策略问题

### Q12: 什么是"家人席位反向操作策略"？
**A**: 
- **原理**: 基于散户投资者行为特点的反向操作策略
- **逻辑**: 
  - 看多信号：家人席位空单增加，多单减少
  - 看空信号：家人席位多单增加，空单减少
- **应用**: 利用散户情绪反向指标进行交易决策

### Q13: 如何自定义家人席位？
**A**: 
```python
# 在config.py中修改
STRATEGY_CONFIG = {
    "家人席位反向操作策略": {
        "default_retail_seats": [
            "你的席位1", "你的席位2", "你的席位3"
        ]
    }
}
```

### Q14: 什么是"蜘蛛网策略"？
**A**: 
- **原理**: 基于持仓分布分化程度判断机构资金参与情况
- **计算**: 知情者(ITS)与非知情者(UTS)的持仓差异
- **应用**: MSD > 0.05看多，MSD < -0.05看空

### Q15: 期限结构分析有什么用？
**A**: 
- **作用**: 分析同品种不同月份合约的价格关系
- **类型**:
  - **Contango**: 远月高于近月，正常市场结构
  - **Backwardation**: 近月高于远月，供需紧张
  - **Flat**: 价格相对平坦，市场均衡

---

## 🚀 部署问题

### Q16: 如何部署到Streamlit Cloud？
**A**: 
1. **准备代码**: 确保所有文件在GitHub仓库中
2. **访问平台**: https://share.streamlit.io/
3. **连接GitHub**: 授权访问你的仓库
4. **选择仓库**: 选择期货分析项目
5. **配置部署**: 主文件选择`streamlit_app.py`
6. **等待部署**: 通常需要5-10分钟

### Q17: 部署时出现错误怎么办？
**A**: 常见错误和解决方案：
```bash
# 错误1: 依赖包版本冲突
# 解决: 更新requirements.txt，移除版本限制

# 错误2: Python版本不兼容  
# 解决: 确保.python-version文件内容为3.11

# 错误3: 内存不足
# 解决: 优化代码，减少内存使用

# 错误4: 超时
# 解决: 已在v2.1版本中解决
```

### Q18: 如何更新已部署的应用？
**A**: 
1. **更新代码**: 推送新代码到GitHub
2. **自动部署**: Streamlit Cloud会自动检测并重新部署
3. **手动重启**: 在Streamlit Cloud控制台点击"Reboot"
4. **查看日志**: 检查部署日志确认更新成功

---

## 🔍 故障排除

### Q19: 系统卡在某个步骤不动了？
**A**: 
- **广期所卡顿**: v2.1版本已自动解决，15秒超时
- **网络超时**: 检查网络连接，重新运行
- **内存不足**: 重启应用，关闭其他程序
- **缓存问题**: 清理缓存重新运行

### Q20: 分析结果不准确怎么办？
**A**: 
- **数据质量**: 确认数据获取成功，无错误提示
- **日期选择**: 选择最近的交易日，避免节假日
- **策略理解**: 查看策略说明，理解分析逻辑
- **多策略验证**: 结合多个策略结果综合判断

### Q21: 如何查看详细错误信息？
**A**: 
```python
# 在本地运行时查看控制台输出
streamlit run streamlit_app.py

# 在云端查看Streamlit Cloud日志
# 访问应用管理页面 -> View logs

# 启用调试模式
import logging
logging.basicConfig(level=logging.DEBUG)
```

---

## 💡 使用技巧

### Q22: 如何提高分析效率？
**A**: 
- **使用缓存**: 重复分析同一日期会很快
- **批量分析**: 一次分析多个相关品种
- **关注共振**: 重点关注多策略共同信号
- **定期清理**: 清理旧缓存释放空间

### Q23: 如何解读分析结果？
**A**: 
- **信号强度**: 数值越大，信号越强
- **策略一致性**: 多策略同向信号可信度更高
- **持仓变化**: 关注大幅变化的合约
- **期限结构**: 结合价格结构判断市场状态

### Q24: 如何导出分析报告？
**A**: 
- **Excel格式**: 点击"下载Excel报告"按钮
- **文本格式**: 复制页面内容到文档
- **图表保存**: 右键点击图表选择保存
- **截图保存**: 使用浏览器截图功能

---

## 🔮 高级功能

### Q25: 如何添加自定义策略？
**A**: 
```python
# 1. 创建策略类
class MyStrategy:
    def analyze(self, data):
        # 实现分析逻辑
        return signal, reason, strength

# 2. 集成到系统
# 修改futures_analyzer.py，添加新策略
```

### Q26: 如何修改超时设置？
**A**: 
```python
# 在cloud_data_fetcher.py中修改
TIMEOUT_CONFIG = {
    "大商所": 30,
    "中金所": 30, 
    "郑商所": 30,
    "上期所": 30,
    "广期所": 15  # 可以调整这个值
}
```

### Q27: 如何添加新的数据源？
**A**: 
```python
# 1. 创建数据源类
class NewDataSource:
    def fetch_data(self, date):
        # 实现数据获取逻辑
        return data

# 2. 集成到数据管理器
# 修改futures_analyzer.py，添加新数据源
```

---

## 📞 获取帮助

### Q28: 遇到问题如何获取帮助？
**A**: 
1. **查看文档**: 先查看相关文档和FAQ
2. **GitHub Issues**: 提交详细的问题描述
3. **邮件联系**: 953534947@qq.com
4. **提供信息**: 
   - 操作系统和Python版本
   - 错误信息截图
   - 操作步骤描述

### Q29: 如何贡献代码？
**A**: 
1. **Fork项目**: 在GitHub上Fork仓库
2. **创建分支**: `git checkout -b feature/your-feature`
3. **提交代码**: `git commit -m "Add your feature"`
4. **创建PR**: 提交Pull Request
5. **代码审查**: 等待维护者审查

### Q30: 如何报告Bug？
**A**: 
在GitHub Issues中提供：
- **Bug描述**: 详细描述问题现象
- **复现步骤**: 如何重现这个问题
- **预期行为**: 期望的正确行为
- **环境信息**: 系统、Python版本等
- **错误日志**: 相关错误信息

---

## 📊 性能优化

### Q31: 如何优化系统性能？
**A**: 
- **硬件优化**: 使用SSD硬盘，增加内存
- **网络优化**: 使用稳定快速的网络连接
- **软件优化**: 
  - 启用缓存功能
  - 关闭不必要的程序
  - 定期清理缓存
- **配置优化**: 调整超时设置，优化并发数

### Q32: 缓存机制如何工作？
**A**: 
- **Streamlit缓存**: 1小时TTL，自动管理
- **文件缓存**: 24小时TTL，手动清理
- **缓存位置**: `cache/` 目录
- **清理方法**: 删除cache目录或使用清理按钮

---

**❓ 常见问题解答 v2.1**  
**更新日期**: 2024-12-01  
**维护者**: 7haoge

如果您的问题没有在这里找到答案，请通过以下方式联系我们：
- 📧 **邮箱**: 953534947@qq.com
- 🐛 **GitHub Issues**: [提交问题](https://github.com/yourusername/futures-analysis/issues)
- 💬 **讨论**: [GitHub Discussions](https://github.com/yourusername/futures-analysis/discussions) 